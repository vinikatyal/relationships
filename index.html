
  <!DOCTYPE html>
  <html lang="en">
  <body>
  <script src="https://unpkg.com/gojs@2.2.10/release/go.js"></script>
  <p>
    This is a minimalist HTML and JavaScript skeleton of the GoJS Sample
    <a href="https://gojs.net/latest/samples/basic.html">basic.html</a>. It was automatically generated from a button on the sample page,
    and does not contain the full HTML. It is intended as a starting point to adapt for your own usage.
    For many samples, you may need to inspect the
    <a href="https://github.com/NorthwoodsSoftware/GoJS/blob/master/samples/basic.html">full source on Github</a>
    and copy other files or scripts.
  </p>
  <div id="allSampleContent" class="p-4 w-full">
    <script id="code">
    function init() {


      // Since 2.2 you can also author concise templates with method chaining instead of GraphObject.make
      // For details, see https://gojs.net/latest/intro/buildingObjects.html
      const $ = go.GraphObject.make;  // for conciseness in defining templates

      myDiagram =
        $(go.Diagram, "myDiagramDiv",  // create a Diagram for the DIV HTML element
          {
            // allow double-click in background to create a new node
            "clickCreatingTool.archetypeNodeData": { text: "Node", color: "white" },

            // allow Ctrl-G to call groupSelection()
            "commandHandler.archetypeGroupData": { text: "Group", isGroup: true, color: "blue" },

            // enable undo & redo
            "undoManager.isEnabled": true
          });

      // Define the appearance and behavior for Nodes:

      // First, define the shared context menu for all Nodes, Links, and Groups.

      // To simplify this code we define a function for creating a context menu button:
      function makeButton(text, action, visiblePredicate) {
        return $("ContextMenuButton",
          $(go.TextBlock, text),
          { click: action },
          // don't bother with binding GraphObject.visible if there's no predicate
          visiblePredicate ? new go.Binding("visible", "", (o, e) => o.diagram ? visiblePredicate(o, e) : false).ofObject() : {});
      }

      // a context menu is an Adornment with a bunch of buttons in them
      var partContextMenu =
        $("ContextMenu",
          makeButton("Properties",
            (e, obj) => {  // OBJ is this Button
              var contextmenu = obj.part;  // the Button is in the context menu Adornment
              var part = contextmenu.adornedPart;  // the adornedPart is the Part that the context menu adorns
              // now can do something with PART, or with its data, or with the Adornment (the context menu)
              if (part instanceof go.Link) alert(linkInfo(part.data));
              else if (part instanceof go.Group) alert(groupInfo(contextmenu));
              else alert(nodeInfo(part.data));
            }),
          makeButton("Cut",
            (e, obj) => e.diagram.commandHandler.cutSelection(),
            o => o.diagram.commandHandler.canCutSelection()),
          makeButton("Copy",
            (e, obj) => e.diagram.commandHandler.copySelection(),
            o => o.diagram.commandHandler.canCopySelection()),
          makeButton("Paste",
            (e, obj) => e.diagram.commandHandler.pasteSelection(e.diagram.toolManager.contextMenuTool.mouseDownPoint),
            o => o.diagram.commandHandler.canPasteSelection(o.diagram.toolManager.contextMenuTool.mouseDownPoint)),
          makeButton("Delete",
            (e, obj) => e.diagram.commandHandler.deleteSelection(),
            o => o.diagram.commandHandler.canDeleteSelection()),
          makeButton("Undo",
            (e, obj) => e.diagram.commandHandler.undo(),
            o => o.diagram.commandHandler.canUndo()),
          makeButton("Redo",
            (e, obj) => e.diagram.commandHandler.redo(),
            o => o.diagram.commandHandler.canRedo()),
          makeButton("Group",
            (e, obj) => e.diagram.commandHandler.groupSelection(),
            o => o.diagram.commandHandler.canGroupSelection()),
          makeButton("Ungroup",
            (e, obj) => e.diagram.commandHandler.ungroupSelection(),
            o => o.diagram.commandHandler.canUngroupSelection())
        );

      function nodeInfo(d) {  // Tooltip info for a node data object
        var str = "Node " + d.key + ": " + d.text + "\n";
        if (d.group)
          str += "member of " + d.group;
        else
          str += "top-level node";
        return str;
      }

      // These nodes have text surrounded by a rounded rectangle
      // whose fill color is bound to the node data.
      // The user can drag a node by dragging its TextBlock label.
      // Dragging from the Shape will start drawing a new link.
      myDiagram.nodeTemplate =
        $(go.Node, "Auto",
          { locationSpot: go.Spot.Center },
          $(go.Shape, "RoundedRectangle",
            {
              fill: "white", // the default fill, if there is no data bound value
              portId: "", cursor: "pointer",  // the Shape is the port, not the whole Node
              // allow all kinds of links from and to this port
              fromLinkable: true, fromLinkableSelfNode: true, fromLinkableDuplicates: true,
              toLinkable: true, toLinkableSelfNode: true, toLinkableDuplicates: true
            },
            new go.Binding("fill", "color")),
          $(go.TextBlock,
            {
              font: "bold 14px sans-serif",
              stroke: '#333',
              margin: 6,  // make some extra space for the shape around the text
              isMultiline: false,  // don't allow newlines in text
              editable: true  // allow in-place editing by user
            },
            new go.Binding("text", "text").makeTwoWay()),  // the label shows the node data's text
          { // this tooltip Adornment is shared by all nodes
            toolTip:
              $("ToolTip",
                $(go.TextBlock, { margin: 4 },  // the tooltip shows the result of calling nodeInfo(data)
                  new go.Binding("text", "", nodeInfo))
              ),
            // this context menu Adornment is shared by all nodes
            contextMenu: partContextMenu
          }
        );

      // Define the appearance and behavior for Links:

      function linkInfo(d) {  // Tooltip info for a link data object
        return "Link:\nfrom " + d.from + " to " + d.to;
      }

      // The link shape and arrowhead have their stroke brush data bound to the "color" property
      myDiagram.linkTemplate =
        $(go.Link,
          { toShortLength: 3, relinkableFrom: true, relinkableTo: true },  // allow the user to relink existing links
          $(go.Shape,
            { strokeWidth: 2 },
            new go.Binding("stroke", "color")),
          $(go.Shape,
            { toArrow: "Standard", stroke: null },
            new go.Binding("fill", "color")),
          { // this tooltip Adornment is shared by all links
            toolTip:
              $("ToolTip",
                $(go.TextBlock, { margin: 4 },  // the tooltip shows the result of calling linkInfo(data)
                  new go.Binding("text", "", linkInfo))
              ),
            // the same context menu Adornment is shared by all links
            contextMenu: partContextMenu
          }
        );

      // Define the appearance and behavior for Groups:

      function groupInfo(adornment) {  // takes the tooltip or context menu, not a group node data object
        var g = adornment.adornedPart;  // get the Group that the tooltip adorns
        var mems = g.memberParts.count;
        var links = 0;
        g.memberParts.each(part => {
          if (part instanceof go.Link) links++;
        });
        return "Group " + g.data.key + ": " + g.data.text + "\n" + mems + " members including " + links + " links";
      }

      // Groups consist of a title in the color given by the group node data
      // above a translucent gray rectangle surrounding the member parts
      myDiagram.groupTemplate =
        $(go.Group, "Vertical",
          {
            selectionObjectName: "PANEL",  // selection handle goes around shape, not label
            ungroupable: true  // enable Ctrl-Shift-G to ungroup a selected Group
          },
          $(go.TextBlock,
            {
              //alignment: go.Spot.Right,
              font: "bold 19px sans-serif",
              isMultiline: false,  // don't allow newlines in text
              editable: true  // allow in-place editing by user
            },
            new go.Binding("text", "text").makeTwoWay(),
            new go.Binding("stroke", "color")),
          $(go.Panel, "Auto",
            { name: "PANEL" },
            $(go.Shape, "Rectangle",  // the rectangular shape around the members
              {
                fill: "rgba(128,128,128,0.2)", stroke: "gray", strokeWidth: 3,
                portId: "", cursor: "pointer",  // the Shape is the port, not the whole Node
                // allow all kinds of links from and to this port
                fromLinkable: true, fromLinkableSelfNode: true, fromLinkableDuplicates: true,
                toLinkable: true, toLinkableSelfNode: true, toLinkableDuplicates: true
              }),
            $(go.Placeholder, { margin: 10, background: "transparent" })  // represents where the members are
          ),
          { // this tooltip Adornment is shared by all groups
            toolTip:
              $("ToolTip",
                $(go.TextBlock, { margin: 4 },
                  // bind to tooltip, not to Group.data, to allow access to Group properties
                  new go.Binding("text", "", groupInfo).ofObject())
              ),
            // the same context menu Adornment is shared by all groups
            contextMenu: partContextMenu
          }
        );

      // Define the behavior for the Diagram background:

      function diagramInfo(model) {  // Tooltip info for the diagram's model
        return "Model:\n" + model.nodeDataArray.length + " nodes, " + model.linkDataArray.length + " links";
      }

      // provide a tooltip for the background of the Diagram, when not over any Part
      myDiagram.toolTip =
        $("ToolTip",
          $(go.TextBlock, { margin: 4 },
            new go.Binding("text", "", diagramInfo))
        );

      // provide a context menu for the background of the Diagram, when not over any Part
      myDiagram.contextMenu =
        $("ContextMenu",
          makeButton("Paste",
            (e, obj) => e.diagram.commandHandler.pasteSelection(e.diagram.toolManager.contextMenuTool.mouseDownPoint),
            o => o.diagram.commandHandler.canPasteSelection(o.diagram.toolManager.contextMenuTool.mouseDownPoint)),
          makeButton("Undo",
            (e, obj) => e.diagram.commandHandler.undo(),
            o => o.diagram.commandHandler.canUndo()),
          makeButton("Redo",
            (e, obj) => e.diagram.commandHandler.redo(),
            o => o.diagram.commandHandler.canRedo())
        );

      // Create the Diagram's Model:
      var nodeDataArray = [
        { key: 1, text: "Alpha", color: "lightblue" },
        { key: 2, text: "Beta", color: "orange" },
        { key: 3, text: "Gamma", color: "lightgreen", group: 5 },
        { key: 4, text: "Delta", color: "pink", group: 5 },
        { key: 5, text: "Epsilon", color: "green", isGroup: true }
      ];
      var linkDataArray = [
        { from: 1, to: 2, color: "blue" },
        { from: 2, to: 2 },
        { from: 3, to: 4, color: "green" },
        { from: 3, to: 1, color: "purple" }
      ];
      myDiagram.model = new go.GraphLinksModel(nodeDataArray, linkDataArray);
    }
    window.addEventListener('DOMContentLoaded', init);
  </script>

<div id="sample">
  <div id="myDiagramDiv" style="border: 1px solid black; width: 400px; height: 400px; position: relative; -webkit-tap-highlight-color: rgba(255, 255, 255, 0); cursor: auto;"><canvas tabindex="0" width="796" height="796" style="position: absolute; top: 0px; left: 0px; z-index: 2; user-select: none; touch-action: none; width: 398px; height: 398px; cursor: auto;">This text is displayed if your browser does not support the Canvas HTML element.</canvas><div style="position: absolute; overflow: auto; width: 398px; height: 398px; z-index: 1;"><div style="position: absolute; width: 1px; height: 1px;"></div></div></div>
  <p>
    This sample demonstrates tooltips and context menus for all parts and for the diagram background,
    as well as several other powerful diagram editing abilities.
  </p>
  <p>
    Unlike the <a href="minimal.html">Minimal</a> sample, this sample has templates for Links and for Groups,
    plus tooltips and context menus for Nodes, for Links, for Groups, and for the Diagram.
  </p>
  <p>This sample has all of the functionality of the Minimal sample, but additionally allows the user to:</p>
  <ul>
    <li>create new nodes: double-click in the background of the diagram</li>
    <li>edit text: select the node and then click on the text, or select the node and press F2</li>
    <li>draw new links: drag from the inner edge of the node's or the group's shape</li>
    <li>reconnect existing links: select the link and then drag the diamond-shaped handle at either end of the link</li>
    <li>group nodes and links: select some nodes and links and then type Ctrl-G (or invoke via context menu)</li>
    <li>ungroup an existing group: select a group and then type Ctrl-Shift-G (or invoke via context menu)</li>
  </ul>
  <p>
    GoJS contains many other possible commands, which can be invoked by either mouse/keyboard/touch or programatically.
    <a href="../intro/commands.html">See an overview of possible commands here.</a>
    On a Mac, use CMD instead of Ctrl.
  </p>
  <p>
    On touch devices, hold your finger stationary to bring up a context menu.
    The default context menu supports most of the standard commands that are enabled at that time for that object.
  </p>
<p class="text-xs">GoJS version 2.2.10. Copyright 1998-2022 by Northwoods Software.</p></div>
    <p><a href="https://github.com/NorthwoodsSoftware/GoJS/blob/master/samples/basic.html" target="_blank">View this sample page's source on GitHub</a></p><pre class=" language-js">
    <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>


      <span class="token comment">// Since 2.2 you can also author concise templates with method chaining instead of GraphObject.make</span>
      <span class="token comment">// For details, see https://gojs.net/latest/intro/buildingObjects.html</span>
      <span class="token keyword">const</span> $ <span class="token operator">=</span> go<span class="token punctuation">.</span>GraphObject<span class="token punctuation">.</span>make<span class="token punctuation">;</span>  <span class="token comment">// for conciseness in defining templates</span>

      myDiagram <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Diagram<span class="token punctuation">,</span> <span class="token string">"myDiagramDiv"</span><span class="token punctuation">,</span>  <span class="token comment">// create a Diagram for the DIV HTML element</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// allow double-click in background to create a new node</span>
            <span class="token string">"clickCreatingTool.archetypeNodeData"</span><span class="token operator">:</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">"Node"</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"white"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

            <span class="token comment">// allow Ctrl-G to call groupSelection()</span>
            <span class="token string">"commandHandler.archetypeGroupData"</span><span class="token operator">:</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">"Group"</span><span class="token punctuation">,</span> isGroup<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"blue"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

            <span class="token comment">// enable undo &amp; redo</span>
            <span class="token string">"undoManager.isEnabled"</span><span class="token operator">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Define the appearance and behavior for Nodes:</span>

      <span class="token comment">// First, define the shared context menu for all Nodes, Links, and Groups.</span>

      <span class="token comment">// To simplify this code we define a function for creating a context menu button:</span>
      <span class="token keyword">function</span> <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> action<span class="token punctuation">,</span> visiblePredicate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ContextMenuButton"</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> click<span class="token operator">:</span> action <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// don't bother with binding GraphObject.visible if there's no predicate</span>
          visiblePredicate <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram <span class="token operator">?</span> <span class="token function">visiblePredicate</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ofObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// a context menu is an Adornment with a bunch of buttons in them</span>
      <span class="token keyword">var</span> partContextMenu <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ContextMenu"</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Properties"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// OBJ is this Button</span>
              <span class="token keyword">var</span> contextmenu <span class="token operator">=</span> obj<span class="token punctuation">.</span>part<span class="token punctuation">;</span>  <span class="token comment">// the Button is in the context menu Adornment</span>
              <span class="token keyword">var</span> part <span class="token operator">=</span> contextmenu<span class="token punctuation">.</span>adornedPart<span class="token punctuation">;</span>  <span class="token comment">// the adornedPart is the Part that the context menu adorns</span>
              <span class="token comment">// now can do something with PART, or with its data, or with the Adornment (the context menu)</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>part <span class="token keyword">instanceof</span> <span class="token class-name">go<span class="token punctuation">.</span>Link</span><span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">linkInfo</span><span class="token punctuation">(</span>part<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>part <span class="token keyword">instanceof</span> <span class="token class-name">go<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">groupInfo</span><span class="token punctuation">(</span>contextmenu<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">else</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">nodeInfo</span><span class="token punctuation">(</span>part<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Cut"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">cutSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canCutSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Copy"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">copySelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canCopySelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Paste"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">pasteSelection</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>toolManager<span class="token punctuation">.</span>contextMenuTool<span class="token punctuation">.</span>mouseDownPoint<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canPasteSelection</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>toolManager<span class="token punctuation">.</span>contextMenuTool<span class="token punctuation">.</span>mouseDownPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Delete"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">deleteSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canDeleteSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Undo"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canUndo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Redo"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canRedo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Group"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">groupSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canGroupSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Ungroup"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">ungroupSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canUngroupSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">function</span> <span class="token function">nodeInfo</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Tooltip info for a node data object</span>
        <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">"Node "</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>key <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">.</span>group<span class="token punctuation">)</span>
          str <span class="token operator">+=</span> <span class="token string">"member of "</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>group<span class="token punctuation">;</span>
        <span class="token keyword">else</span>
          str <span class="token operator">+=</span> <span class="token string">"top-level node"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> str<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// These nodes have text surrounded by a rounded rectangle</span>
      <span class="token comment">// whose fill color is bound to the node data.</span>
      <span class="token comment">// The user can drag a node by dragging its TextBlock label.</span>
      <span class="token comment">// Dragging from the Shape will start drawing a new link.</span>
      myDiagram<span class="token punctuation">.</span>nodeTemplate <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Node<span class="token punctuation">,</span> <span class="token string">"Auto"</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> locationSpot<span class="token operator">:</span> go<span class="token punctuation">.</span>Spot<span class="token punctuation">.</span>Center <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Shape<span class="token punctuation">,</span> <span class="token string">"RoundedRectangle"</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              fill<span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span> <span class="token comment">// the default fill, if there is no data bound value</span>
              portId<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> cursor<span class="token operator">:</span> <span class="token string">"pointer"</span><span class="token punctuation">,</span>  <span class="token comment">// the Shape is the port, not the whole Node</span>
              <span class="token comment">// allow all kinds of links from and to this port</span>
              fromLinkable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fromLinkableSelfNode<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fromLinkableDuplicates<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              toLinkable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> toLinkableSelfNode<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> toLinkableDuplicates<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> <span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              font<span class="token operator">:</span> <span class="token string">"bold 14px sans-serif"</span><span class="token punctuation">,</span>
              stroke<span class="token operator">:</span> <span class="token string">'#333'</span><span class="token punctuation">,</span>
              margin<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>  <span class="token comment">// make some extra space for the shape around the text</span>
              isMultiline<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// don't allow newlines in text</span>
              editable<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// allow in-place editing by user</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">makeTwoWay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// the label shows the node data's text</span>
          <span class="token punctuation">{</span> <span class="token comment">// this tooltip Adornment is shared by all nodes</span>
            toolTip<span class="token operator">:</span>
              <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ToolTip"</span><span class="token punctuation">,</span>
                <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span> <span class="token punctuation">{</span> margin<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// the tooltip shows the result of calling nodeInfo(data)</span>
                  <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> nodeInfo<span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// this context menu Adornment is shared by all nodes</span>
            contextMenu<span class="token operator">:</span> partContextMenu
          <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Define the appearance and behavior for Links:</span>

      <span class="token keyword">function</span> <span class="token function">linkInfo</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Tooltip info for a link data object</span>
        <span class="token keyword">return</span> <span class="token string">"Link:\nfrom "</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">" to "</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>to<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// The link shape and arrowhead have their stroke brush data bound to the "color" property</span>
      myDiagram<span class="token punctuation">.</span>linkTemplate <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Link<span class="token punctuation">,</span>
          <span class="token punctuation">{</span> toShortLength<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> relinkableFrom<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> relinkableTo<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// allow the user to relink existing links</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Shape<span class="token punctuation">,</span>
            <span class="token punctuation">{</span> strokeWidth<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"stroke"</span><span class="token punctuation">,</span> <span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Shape<span class="token punctuation">,</span>
            <span class="token punctuation">{</span> toArrow<span class="token operator">:</span> <span class="token string">"Standard"</span><span class="token punctuation">,</span> stroke<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> <span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token comment">// this tooltip Adornment is shared by all links</span>
            toolTip<span class="token operator">:</span>
              <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ToolTip"</span><span class="token punctuation">,</span>
                <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span> <span class="token punctuation">{</span> margin<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// the tooltip shows the result of calling linkInfo(data)</span>
                  <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> linkInfo<span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// the same context menu Adornment is shared by all links</span>
            contextMenu<span class="token operator">:</span> partContextMenu
          <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Define the appearance and behavior for Groups:</span>

      <span class="token keyword">function</span> <span class="token function">groupInfo</span><span class="token punctuation">(</span><span class="token parameter">adornment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// takes the tooltip or context menu, not a group node data object</span>
        <span class="token keyword">var</span> g <span class="token operator">=</span> adornment<span class="token punctuation">.</span>adornedPart<span class="token punctuation">;</span>  <span class="token comment">// get the Group that the tooltip adorns</span>
        <span class="token keyword">var</span> mems <span class="token operator">=</span> g<span class="token punctuation">.</span>memberParts<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
        <span class="token keyword">var</span> links <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span>memberParts<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token parameter">part</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>part <span class="token keyword">instanceof</span> <span class="token class-name">go<span class="token punctuation">.</span>Link</span><span class="token punctuation">)</span> links<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"Group "</span> <span class="token operator">+</span> g<span class="token punctuation">.</span>data<span class="token punctuation">.</span>key <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> g<span class="token punctuation">.</span>data<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token string">"\n"</span> <span class="token operator">+</span> mems <span class="token operator">+</span> <span class="token string">" members including "</span> <span class="token operator">+</span> links <span class="token operator">+</span> <span class="token string">" links"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Groups consist of a title in the color given by the group node data</span>
      <span class="token comment">// above a translucent gray rectangle surrounding the member parts</span>
      myDiagram<span class="token punctuation">.</span>groupTemplate <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Group<span class="token punctuation">,</span> <span class="token string">"Vertical"</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            selectionObjectName<span class="token operator">:</span> <span class="token string">"PANEL"</span><span class="token punctuation">,</span>  <span class="token comment">// selection handle goes around shape, not label</span>
            ungroupable<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// enable Ctrl-Shift-G to ungroup a selected Group</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token comment">//alignment: go.Spot.Right,</span>
              font<span class="token operator">:</span> <span class="token string">"bold 19px sans-serif"</span><span class="token punctuation">,</span>
              isMultiline<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// don't allow newlines in text</span>
              editable<span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// allow in-place editing by user</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">makeTwoWay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"stroke"</span><span class="token punctuation">,</span> <span class="token string">"color"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Panel<span class="token punctuation">,</span> <span class="token string">"Auto"</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"PANEL"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Shape<span class="token punctuation">,</span> <span class="token string">"Rectangle"</span><span class="token punctuation">,</span>  <span class="token comment">// the rectangular shape around the members</span>
              <span class="token punctuation">{</span>
                fill<span class="token operator">:</span> <span class="token string">"rgba(128,128,128,0.2)"</span><span class="token punctuation">,</span> stroke<span class="token operator">:</span> <span class="token string">"gray"</span><span class="token punctuation">,</span> strokeWidth<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                portId<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> cursor<span class="token operator">:</span> <span class="token string">"pointer"</span><span class="token punctuation">,</span>  <span class="token comment">// the Shape is the port, not the whole Node</span>
                <span class="token comment">// allow all kinds of links from and to this port</span>
                fromLinkable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fromLinkableSelfNode<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fromLinkableDuplicates<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                toLinkable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> toLinkableSelfNode<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> toLinkableDuplicates<span class="token operator">:</span> <span class="token boolean">true</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>Placeholder<span class="token punctuation">,</span> <span class="token punctuation">{</span> margin<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> background<span class="token operator">:</span> <span class="token string">"transparent"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// represents where the members are</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token comment">// this tooltip Adornment is shared by all groups</span>
            toolTip<span class="token operator">:</span>
              <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ToolTip"</span><span class="token punctuation">,</span>
                <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span> <span class="token punctuation">{</span> margin<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token comment">// bind to tooltip, not to Group.data, to allow access to Group properties</span>
                  <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> groupInfo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ofObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// the same context menu Adornment is shared by all groups</span>
            contextMenu<span class="token operator">:</span> partContextMenu
          <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Define the behavior for the Diagram background:</span>

      <span class="token keyword">function</span> <span class="token function">diagramInfo</span><span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Tooltip info for the diagram's model</span>
        <span class="token keyword">return</span> <span class="token string">"Model:\n"</span> <span class="token operator">+</span> model<span class="token punctuation">.</span>nodeDataArray<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">" nodes, "</span> <span class="token operator">+</span> model<span class="token punctuation">.</span>linkDataArray<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">" links"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// provide a tooltip for the background of the Diagram, when not over any Part</span>
      myDiagram<span class="token punctuation">.</span>toolTip <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ToolTip"</span><span class="token punctuation">,</span>
          <span class="token function">$</span><span class="token punctuation">(</span>go<span class="token punctuation">.</span>TextBlock<span class="token punctuation">,</span> <span class="token punctuation">{</span> margin<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>Binding</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> diagramInfo<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// provide a context menu for the background of the Diagram, when not over any Part</span>
      myDiagram<span class="token punctuation">.</span>contextMenu <span class="token operator">=</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"ContextMenu"</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Paste"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">pasteSelection</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>toolManager<span class="token punctuation">.</span>contextMenuTool<span class="token punctuation">.</span>mouseDownPoint<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canPasteSelection</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>toolManager<span class="token punctuation">.</span>contextMenuTool<span class="token punctuation">.</span>mouseDownPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Undo"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canUndo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function">makeButton</span><span class="token punctuation">(</span><span class="token string">"Redo"</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>diagram<span class="token punctuation">.</span>commandHandler<span class="token punctuation">.</span><span class="token function">canRedo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Create the Diagram's Model:</span>
      <span class="token keyword">var</span> nodeDataArray <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">"Alpha"</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"lightblue"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">"Beta"</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"orange"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">"Gamma"</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"lightgreen"</span><span class="token punctuation">,</span> group<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">"Delta"</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"pink"</span><span class="token punctuation">,</span> group<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">"Epsilon"</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"green"</span><span class="token punctuation">,</span> isGroup<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> linkDataArray <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"blue"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"green"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">"purple"</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span>
      myDiagram<span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">go<span class="token punctuation">.</span>GraphLinksModel</span><span class="token punctuation">(</span>nodeDataArray<span class="token punctuation">,</span> linkDataArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
  </pre></div>
  </body>
  </html>